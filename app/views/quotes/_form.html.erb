<%= form_with(model: quote) do |form| %>
  <% if quote.errors.any? %>
    <div style="color: red">
      <h2><%= pluralize(quote.errors.count, "error") %> prohibited this quote from being saved:</h2>

      <ul>
        <% quote.errors.each do |error| %>
          <li><%= error.full_message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div>
    <%= form.label :quote_type, style: "display: block" %>
    <%= form.select :quote_type, 
      ['Sitio Web Est치ndar', 
        'Sitio Web Est치ndar - Extra',
        'Sitio Web Premium', 
        'Sitio Web Elite'], 
        :prompt => "Select quote type here", formaction: new_quote_path, formmethod: :get %>
  </div>

  <div>
    <%= form.label :client_id , style: "display: block" %>
    <%= form.collection_select :client_id, Client.all, :id, :company, :prompt => "Select the client" %>
  </div>


  <% quote_amount = 0 %>
  <div>
    <% if quote.quote_type == 'Sitio Web Est치ndar' %>
      <% quote_amount += 6999 %>
    <% elsif quote.quote_type == "Sitio Web Est치ndar - Extra" %>
      <% quote_amount += 8498%>
    <% elsif quote.quote_type == "Sitio Web Premium" %>
      <% quote_amount += 11999 %>
    <% elsif quote.quote_type == "Sitio Web Elite" %>
      <% quote_amount += 19999 %>
    <% end %>
  </div>

  <div>

    <%= form.label :amount, "Extra Amount", style: "display: block" %>
    <%= form.number_field :amount %>
  </div>

  <% quote_amount += quote.amount.to_i %>

  <div>
  <%= form.button "Refresh", formaction: new_quote_path, formmethod: :get %>
  </div>

  <div>
    Amount for service: <%= quote_amount %> MXN
  </div>

  <div class="mt-3">
    <%= form.submit %>
  </div>
<% end %>
