<h1 class="ms-3">Client List</h1>

<div>
	<%= link_to "Create new client", new_client_path, :class => "btn btn-primary ms-3" %>
</div>

<div class="table-responsive-md m-3">
	<table class="table table-striped table-hover table-bordered">
		<thead>
			<tr class="table-secondary">
				<th scope="col">First Name</th>
				<th scope="col">Last Name</th>
				<th scope="col">Company</th>
				<th scope="col">Status</th>
				<th scope="col">Whatsapp</th>
				<th scope="col">Email</th>
				<th scope="col">Created At</th>
				<th scope="col">Updated At</th>
				<th scope="col" colspan="3">Actions</th>
			</tr>
		</thead>
		<tbody class="table-group-divider">
			<% @clients.each do |client| %>
				<tr scope="row" class="table-light">
					<td><%= client.first_name %></td>
					<td><%= client.last_name %></td>
					<td><%= client.company %></td>
					<td><%= client.status %></td>
					<td><%= client.whatsapp %>
						<% if client.whatsapp.present? %>
							<%= link_to icon("whatsapp", class: "text-success"),
							"https://api.whatsapp.com/send/?phone=" + client.whatsapp,
							target: '_blank' %>		
						<% end %>
					</td>
					<td><%= client.email %>
						<% if client.email.present? %>
						<%= link_to icon("envelope", class: "contact-icon" ),
						"mailto:" + client.email %>
						<% end %>
					</td>
					<td><%= client.created_at.to_date %></td>
					<td><%= client.updated_at.to_date %></td>
					<td class="text-center"><%= link_to "Show", client_path(client), :class => "btn btn-secondary" %></td>
					<td class="text-center"><%= link_to "Edit", edit_client_path(client), :class => "btn btn-secondary" %></td>
					<td class="text-center"><%= link_to "Delete", client_path(client), :class => "btn btn-danger" ,data: { "turbo_method": :delete, "turbo_confirm": "Are you sure?"} %></td>
				</tr>
			<% end %>
		</tbody>
	</table>
</div>
